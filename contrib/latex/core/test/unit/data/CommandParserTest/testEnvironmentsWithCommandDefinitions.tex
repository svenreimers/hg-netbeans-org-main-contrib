\documentclass{article}

\newenvironment{aaa}{
\newcommand{\test}{}
}{}

\begin{document}
\begin{aaa}
\test
\end{aaa}
\end{document}
