/*
 * The contents of this file are subject to the terms of the Common Development
 * and Distribution License (the License). You may not use this file except in
 * compliance with the License.
 *
 * You can obtain a copy of the License at http://www.netbeans.org/cddl.html
 * or http://www.netbeans.org/cddl.txt.
 *
 * When distributing Covered Code, include this CDDL Header Notice in each file
 * and include the License file at http://www.netbeans.org/cddl.txt.
 * If applicable, add the following below the CDDL Header, with the fields
 * enclosed by brackets [] replaced by your own identifying information:
 * "Portions Copyrighted [year] [name of copyright owner]"
 *
 * The Original Software is NetBeans. The Initial Developer of the Original
 * Software is Sun Microsystems, Inc. Portions Copyright 1997-2006 Sun
 * Microsystems, Inc. All Rights Reserved.
 */

// Simplification rules using DeMorgan's Theorem
!($a <= $b) => $a > $b;
!($a > $b) => $a <= $b;
!($a == $b) => $a != $b;
!($a != $b) => $a == $b;
!($a >= $b) => $a < $b;
!($a < $b) => $a >= $b;
!!$a => $a;
!($a && $b) => !$a || !$b;
!($a || $b) => !$a && !$b;

// Cleanup if statements with empty then or else clauses
//if ($cond) $then; else $else => if ($cond) $then :: isEmpty($else);
//if ($cond) $then; else $else => if (!($cond)) $else :: isEmpty($then);

// Similar boolean simplification rules
$a == true => $a;
$a == false =>!$a;
$a ? false : $b => !$a && $b;
$a ? true : $b => $a || $b;
$a ? $b : false => $a && $b;
true ? $a : $b => $a;
false ? $a : $b => $b;
true && $a => $a;
$a && true => $a;
false && $a => false;
$a && false => false; //side effect free test!
true || $a => true;
$a || true => true; //side effect free test!
false || $a => $a;
$a || false => $a;
this == null => false;
this != null => true;
null == this => false;
null != this => true;
if(true) $a; else $b => $a;
if(false) $a; else $b => $b :: !isNullTree($b);
if(true) $a => $a;
if(false) $a => ;
while(false) $a => ;
do $a; while(false) => $a;
for($a; false; $b) $c => { $a; }

// Conditional expression simplifications
$a ? $b + $c : $b + $d => $b + ($a ? $c : $d);
$a ? $b - $c : $b - $d => $b - ($a ? $c : $d);
$a ? $b * $c : $b * $d => $b * ($a ? $c : $d);
$a ? $b / $c : $b / $d => $b / ($a ? $c : $d);

$a ? $c + $b : $d + $b => ($a ? $c : $d) + $b;
$a ? $c - $b : $d - $b => ($a ? $c : $d) - $b;
$a ? $c * $b : $d * $b => ($a ? $c : $d) * $b;
$a ? $c / $b : $d / $b => ($a ? $c : $d) / $b;

