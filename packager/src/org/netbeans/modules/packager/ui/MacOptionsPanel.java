/*
 * MacOptionsPanel.java
 *
 * Created on May 29, 2004, 11:44 AM
 */

package org.netbeans.modules.packager.ui;

import javax.swing.JTextField;
import javax.swing.text.JTextComponent;

/**
 *
 * @author  Tim Boudreau
 */
public class MacOptionsPanel extends java.awt.Panel implements java.awt.event.FocusListener, java.awt.event.ActionListener {
    
    /** Creates new form MacOptionsPanel */
    public MacOptionsPanel() {
        initComponents();
        
       
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        java.awt.GridBagConstraints gridBagConstraints;

        icon = new javax.swing.JTextField();
        iconchoose = new javax.swing.JButton();
        iconlabel = new javax.swing.JLabel();
        appnamelabel = new javax.swing.JLabel();
        appname = new javax.swing.JTextField();
        appversion = new javax.swing.JTextField();
        appversionlabel = new javax.swing.JLabel();
        instructions = new javax.swing.JTextArea();

        setLayout(new java.awt.GridBagLayout());

        icon.setHorizontalAlignment(javax.swing.JTextField.LEFT);
        icon.addFocusListener(this);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipadx = 200;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 11, 11);
        gridBagConstraints.weightx = 0.25;
        gridBagConstraints.weighty = 0.5;
        add(icon, gridBagConstraints);

        iconchoose.setText("Choose...");
        iconchoose.addActionListener(this);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 11, 11);
        gridBagConstraints.weighty = 0.5;
        add(iconchoose, gridBagConstraints);

        iconlabel.setText("Icon file (.icns)");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipadx = 69;
        gridBagConstraints.insets = new java.awt.Insets(0, 11, 11, 11);
        gridBagConstraints.weighty = 0.5;
        add(iconlabel, gridBagConstraints);

        appnamelabel.setText("Application Name");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(11, 11, 11, 11);
        gridBagConstraints.weighty = 0.5;
        add(appnamelabel, gridBagConstraints);

        appname.addFocusListener(this);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipadx = 200;
        gridBagConstraints.insets = new java.awt.Insets(11, 0, 11, 11);
        gridBagConstraints.weightx = 0.25;
        gridBagConstraints.weighty = 0.5;
        add(appname, gridBagConstraints);

        appversion.addFocusListener(this);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipadx = 200;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 11, 11);
        gridBagConstraints.weightx = 0.25;
        gridBagConstraints.weighty = 0.5;
        add(appversion, gridBagConstraints);

        appversionlabel.setText("Application Version");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(0, 11, 11, 11);
        gridBagConstraints.weighty = 0.5;
        add(appversionlabel, gridBagConstraints);

        instructions.setEditable(false);
        instructions.setLineWrap(true);
        instructions.setText("To configure additional application options, such as localized application names, edit the Info.plist file in the root directory of the project.  See Apple's documentation of the .plist file format for details at http://developer.apple.com/technotes/tn/tn2013.html");
        instructions.setWrapStyleWord(true);
        instructions.setBorder(new javax.swing.border.EmptyBorder(new java.awt.Insets(1, 1, 1, 1)));
        instructions.setOpaque(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = 6;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipady = 100;
        gridBagConstraints.insets = new java.awt.Insets(11, 11, 11, 11);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTH;
        gridBagConstraints.weighty = 1.0;
        add(instructions, gridBagConstraints);

    }

    // Code for dispatching events from components to event handlers.

    public void actionPerformed(java.awt.event.ActionEvent evt) {
        if (evt.getSource() == iconchoose) {
            MacOptionsPanel.this.iconchooseActionPerformed(evt);
        }
    }

    public void focusGained(java.awt.event.FocusEvent evt) {
        if (evt.getSource() == icon) {
            MacOptionsPanel.this.iconFocusGained(evt);
        }
        else if (evt.getSource() == appversion) {
            MacOptionsPanel.this.iconFocusGained(evt);
        }
        else if (evt.getSource() == appname) {
            MacOptionsPanel.this.iconFocusGained(evt);
        }
    }

    public void focusLost(java.awt.event.FocusEvent evt) {
        if (evt.getSource() == icon) {
            MacOptionsPanel.this.iconFocusLost(evt);
        }
        else if (evt.getSource() == appversion) {
            MacOptionsPanel.this.iconFocusLost(evt);
        }
        else if (evt.getSource() == appname) {
            MacOptionsPanel.this.iconFocusLost(evt);
        }
    }//GEN-END:initComponents

    private void iconchooseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_iconchooseActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_iconchooseActionPerformed

    private void iconFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_iconFocusLost
        checkValid();
    }//GEN-LAST:event_iconFocusLost

    private void iconFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_iconFocusGained
        if (evt.getSource() instanceof JTextField) {
            JTextField jtf = (JTextField) evt.getSource();
            String s = jtf.getText();
            if (s != null) {
                jtf.setSelectionStart (0);
                jtf.setSelectionEnd (s.length());
            }
        }
    }//GEN-LAST:event_iconFocusGained
    
    public String getApplicationVersion() {
        return procStr (appversion);
    }
    
    public String getIconFilename () {
        return procStr (icon);
    }
    
    public String getApplicationName() {
        return procStr (appname);
    }
    
    private String procStr (JTextComponent jtc) {
        String s = jtc.getText();
        if (s != null) {
            s = s.trim();
            if (s.length() == 0) {
                s = null;
            }
        }
        return s;
    }
    
    private boolean checkValid() {
        return valid(); //XXX
    }
    
    public boolean valid () {
        return procStr(appname) != null && procStr (appversion) != null;
    }
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField appname;
    private javax.swing.JLabel appnamelabel;
    private javax.swing.JTextField appversion;
    private javax.swing.JLabel appversionlabel;
    private javax.swing.JTextField icon;
    private javax.swing.JButton iconchoose;
    private javax.swing.JLabel iconlabel;
    private javax.swing.JTextArea instructions;
    // End of variables declaration//GEN-END:variables
    
}
