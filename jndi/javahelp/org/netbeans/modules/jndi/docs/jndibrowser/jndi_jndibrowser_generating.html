<!--
                Sun Public License Notice

The contents of this file are subject to the Sun Public License
Version 1.0 (the "License"). You may not use this file except in
compliance with the License. A copy of the License is available at
http://www.sun.com/

The Original Code is NetBeans. The Initial Developer of the Original
Code is Sun Microsystems, Inc. Portions Copyright 1997-2001 Sun
Microsystems, Inc. All Rights Reserved.
-->

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="lastupdated" content="29aug2000">
   <meta name="GENERATOR" content="Mozilla/4.6 [en] (WinNT; U) [Netscape]">
   <title>Generating Code With the JNDI Browser</title>
<!--       
 *        Copyright (C) 2000  Sun Microsystems, Inc
 *                    All rights reserved.
 *          Notice of copyright on this source code 
 *          product does not indicate publication. 
 * 
 * RESTRICTED RIGHTS LEGEND: Use, duplication, or disclosure by 
 * the U.S. Government is subject to restrictions as set forth 
 * in subparagraph (c)(1)(ii) of the Rights in Technical Data
 * and Computer Software Clause at DFARS 252.227-7013 (Oct. 1988) 
 * and FAR 52.227-19 (c) (June 1988).
 *
 *    Sun Microsystems, Inc., 901 San Antonio Road,
 *    Palo Alto, California 94303 U.S.A.
 *
-->
</head>
<body bgcolor="#FFFFFF">

<h2>
Generating Code With the JNDI Browser</h2>
After connecting to a Naming or Directory Service with the JNDI Browser,
you can use the browser to generate code to use in your application.
<p><b>Generating Look Up or Binding Code</b>
<ol>
<li>
In the Explorer Window's runtime tab, use the browser nodes to locate the
naming context or object you with to operate on.</li>

<li>
Right-click on the node that represents the naming context or object. On
the context menu, choose either "Copy Lookup Code" or "Copy Binding Code:</li>

<ul>
<li>
On nodes that represent naming contexts you can generate either lookup
code, which returns a reference to the context, or binding code, which
will bind a new object in the context.</li>

<li>
On nodes the represent naming objects you can only generate lookup code.</li>
</ul>

<li>
Switch back to the editing window and paste the generate code in the appropriate
place.</li>
</ol>
<b>Example of Binding Code</b>
<p>The following code was generated by the JNDI Module to bind an object
(a PersistenceManagerFactory) in an LDAP Directory Service running on the
local host at port 389.
<blockquote><tt>/** Inserted by Jndi module */</tt>
<br><tt>java.util.Properties jndiProperties = new java.util.Properties();</tt>
<br><tt>jndiProperties.put("java.naming.provider.url","ldap://localhost:389/o=forte4java.com");</tt>
<br><tt>jndiProperties.put("java.naming.factory.initial","com.sun.jndi.ldap.LdapCtxFactory");</tt>
<br><tt>try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.directory.DirContext jndiCtx =
new javax.naming.directory.InitialDirContext(jndiProperties);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.Context jndiObject = (javax.naming.Context)jndiCtx.lookup("");</tt>
<br><tt>&nbsp;&nbsp;&nbsp; jndiObject.bind("&lt;Name>",&lt;Object>);</tt>
<br><tt>} catch (javax.naming.NamingException ne) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; ne.printStackTrace();</tt>
<br><tt>}</tt></blockquote>
To complete this code you need to specify a name and object:
<blockquote><tt>/** Inserted by Jndi module */</tt>
<br><tt>java.util.Properties jndiProperties = new java.util.Properties();</tt>
<br><tt>jndiProperties.put("java.naming.provider.url","ldap://localhost:389/o=forte4java.com");</tt>
<br><tt>jndiProperties.put("java.naming.factory.initial","com.sun.jndi.ldap.LdapCtxFactory");</tt>
<br><tt>try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; // Create a PersistenceManagerFactory:
(// dixie::1521, db name ORCL)</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; PersistenceManagerFactory pmf = new PersistenceManagerFactoryImpl();</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionUserName("scott");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionPassword("tiger");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionDriverName("oracle.jdbc.driver.OracleDriver");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionURL("jdbc:oracle:thin:@dixie:1521:ORCL");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setOptimistic(true); //it is false
by default</tt><tt></tt>
<p><tt>&nbsp;&nbsp;&nbsp; javax.naming.directory.DirContext jndiCtx = new
javax.naming.directory.InitialDirContext(jndiProperties);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.Context jndiObject = (javax.naming.Context)jndiCtx.lookup("");</tt>
<br><tt>&nbsp;&nbsp;&nbsp; jndiObject.bind("cn=pmf_for_oracle", pmf);</tt>
<br><tt>} catch (javax.naming.NamingException ne) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; ne.printStackTrace();</tt>
<br><tt>}</tt></blockquote>
The object is bound under the name "pmf_for_oracle."
<p><b>Example of Look Up Code</b>
<p>The following code was generated by the JNDI Module to look up an the
object that was bound by the previous example:
<blockquote><tt>/** Inserted by Jndi module */</tt>
<br><tt>java.util.Properties jndiProperties = new java.util.Properties();</tt>
<br><tt>jndiProperties.put("java.naming.provider.url","ldap://localhost:389/o=forte4java.com");</tt>
<br><tt>jndiProperties.put("java.naming.factory.initial","com.sun.jndi.ldap.LdapCtxFactory");</tt>
<br><tt>try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.directory.DirContext jndiCtx =
new javax.naming.directory.InitialDirContext(jndiProperties);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; com.sun.forte4j.persistence.PersistenceManagerFactoryImpl
jndiObject =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (com.sun.forte4j.persistence.PersistenceManagerFactoryImpl)jndiCtx.lookup("cn=pmf_for_oracle");</tt>
<br><tt>} catch (javax.naming.NamingException ne) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; ne.printStackTrace();</tt>
<br><tt>}</tt></blockquote>

<hr><font size=-2><a href="../credits.html">Legal Notices</a></font>
</body>
</html>
