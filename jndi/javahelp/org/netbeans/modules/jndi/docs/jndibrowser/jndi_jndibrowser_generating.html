<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
 * 
 *     Copyright 2002 Sun Microsystems, Inc. All rights reserved.
 *     Use is subject to license terms.
 *
 *
 -->
<HTML>
<HEAD>
<title>Generating Code With the JNDI Browser</title>
<link rel="stylesheet" href="../../../usersguide/ide.css" type="text/css"></HEAD>
<body>


<h2>Generating Code With the JNDI Browser</h2>
<p>
After connecting to a Naming or Directory Service with the JNDI Browser,
you can use the browser to generate code to use in your application.
</p>
<p><b>To generate look up or binding code:</b>
<ol>
<li>
In the Runtime tab of the Explorer window, use the browser nodes to locate the
naming context or object you want to operate on.</li>

<li>
Right-click the node that represents the naming context or object. From
the contextual menu, choose Copy Lookup Code or Copy Binding Code.

<ul>
<li>On nodes that represent naming contexts, you can generate either
lookup code, which returns a reference to the context, or binding
code, which binds a new object in the context.
</li>
<li>On nodes the represent naming objects you can only generate lookup code.</li>
</ul></li>

<li>
In the Source Editor, paste the generated code in the appropriate
place.
</li>
</ol>

<p><b>Example of binding code</b></p>
<p>
The following code was generated by the JNDI Module to bind an object
(a PersistenceManagerFactory) in an LDAP Directory Service running on the
local host at port 389.
</p>
<blockquote>
<tt>/** Inserted by Jndi module */</tt>
<br><tt>java.util.Properties jndiProperties = new java.util.Properties();</tt>
<br><tt>jndiProperties.put("java.naming.provider.url","ldap://localhost:389/o=forte4java.com");</tt>
<br><tt>jndiProperties.put("java.naming.factory.initial","com.sun.jndi.ldap.LdapCtxFactory");</tt>
<br><tt>try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.directory.DirContext jndiCtx =
new javax.naming.directory.InitialDirContext(jndiProperties);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.Context jndiObject = (javax.naming.Context)jndiCtx.lookup("");</tt>
<br><tt>&nbsp;&nbsp;&nbsp; jndiObject.bind("&lt;Name>",&lt;Object>);</tt>
<br><tt>} catch (javax.naming.NamingException ne) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; ne.printStackTrace();</tt>
<br><tt>}</tt>
</blockquote>
<p>
To complete this code you need to specify a name and object:</p>
<blockquote>
<tt>/** Inserted by Jndi module */</tt>
<br><tt>java.util.Properties jndiProperties = new java.util.Properties();</tt>
<br><tt>jndiProperties.put("java.naming.provider.url","ldap://localhost:389/o=forte4java.com");</tt>
<br><tt>jndiProperties.put("java.naming.factory.initial","com.sun.jndi.ldap.LdapCtxFactory");</tt>
<br><tt>try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; // Create a PersistenceManagerFactory:
(// dixie::1521, db name ORCL)</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; PersistenceManagerFactory pmf = new PersistenceManagerFactoryImpl();</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionUserName("scott");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionPassword("tiger");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionDriverName("oracle.jdbc.driver.OracleDriver");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setConnectionURL("jdbc:oracle:thin:@dixie:1521:ORCL");</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; pmf.setOptimistic(true); //it is false
by default</tt><tt></tt>
<p><tt>&nbsp;&nbsp;&nbsp; javax.naming.directory.DirContext jndiCtx = new
javax.naming.directory.InitialDirContext(jndiProperties);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.Context jndiObject = (javax.naming.Context)jndiCtx.lookup("");</tt>
<br><tt>&nbsp;&nbsp;&nbsp; jndiObject.bind("cn=pmf_for_oracle", pmf);</tt>
<br><tt>} catch (javax.naming.NamingException ne) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; ne.printStackTrace();</tt>
<br><tt>}</tt>
</blockquote>
<p>
The object is bound under the name <code>pmf_for_oracle</code>.</p>

<p>
<b>Example of lookup code</b>
</p>
<p>The following code was generated by the JNDI Module to look up an the
object that was bound by the previous example.</p>
<blockquote>
<tt>/** Inserted by Jndi module */</tt>
<br><tt>java.util.Properties jndiProperties = new java.util.Properties();</tt>
<br><tt>jndiProperties.put("java.naming.provider.url","ldap://localhost:389/o=forte4java.com");</tt>
<br><tt>jndiProperties.put("java.naming.factory.initial","com.sun.jndi.ldap.LdapCtxFactory");</tt>
<br><tt>try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; javax.naming.directory.DirContext jndiCtx =
new javax.naming.directory.InitialDirContext(jndiProperties);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; com.sun.forte4j.persistence.PersistenceManagerFactoryImpl
jndiObject =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (com.sun.forte4j.persistence.PersistenceManagerFactoryImpl)jndiCtx.lookup("cn=pmf_for_oracle");</tt>
<br><tt>} catch (javax.naming.NamingException ne) {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; ne.printStackTrace();</tt>
<br><tt>}</tt>
</blockquote>

<table>
<tr>
<th colspan=2 align=left>See also</th>
</tr>
<tr>
<td width="23"></td>
<td>
<a href="jndi_jndibrowser_commands.html">JNDI Browser Commands</a>
</td>
</tr>
</table>

<hr>
<small><a href="../credits.html">Legal Notices</a></small>
</body>
</html>
