<!--
                Sun Public License Notice

The contents of this file are subject to the Sun Public License
Version 1.0 (the "License"). You may not use this file except in
compliance with the License. A copy of the License is available at
http://www.sun.com/

The Original Code is NetBeans. The Initial Developer of the Original
Code is Sun Microsystems, Inc. Portions Copyright 1997-2001 Sun
Microsystems, Inc. All Rights Reserved.
-->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--
 *     Copyright 2001 Sun Microsystems, Inc. All rights reserved.
>   *     Use is subject to license terms.
>   *
>   *     Copyright 2001 Sun Microsystems, Inc. Tous droits r&eacute;serv&eacute;s.
>   *     L'utilisation est r&eacute;gie par les termes de cette licence.
>   *
>   *
> -->
<html>
<head>
<meta name="lastupdated" content="18aprr2001">
<title>Completing Client-side Files</title>
<link rel="StyleSheet" href="../ide.css" type="text/css">
</head>
<body>

<h2>Completing Client-side Files</h2>

<p>
The code you add to your client program depends on the binding method the
program uses:
<ul>
<li>
If your client reads an IOR from standard input, the binding code is complete,
and you can code the <tt>narrow()</tt> method and invocations of server-side
methods.</li>

<li>
If your client reads an IOR from a file, you need to add the file's name.
After doing this you can code the <tt>narrow()</tt> method and server-side method
invocations.</li>

<li>
If your client reads an IOR from a Naming Service, you need to code a naming
service <tt>resolve()</tt> method. After doing this you can code the
<tt>narrow()</tt> method and invocations of server-side methods.</li>
</ul>
</p>

<h3><a NAME="existing"></a>Coding the Naming Service <tt>resolve() Method</tt></h3>
<p>
If your client class uses Naming Service Binding, the generated code does
not include the <tt>lookup()</tt> method. To code this, you need to know
how the server binds itself to the naming service. The easiest way to generate
this code is with the Naming Service Browser, which can read the server's
IOR from the naming service and generate lookup code for you.
<ol>
<li>
Start the CORBA server program.</li>

<li>
Point the CORBA Module's Naming Service Browser to the naming service to
which the server program bound the servant instance it created.</li>

<li>
Expand the Naming Service node to the subnode that represents the servant
instance.</li>

<li>
Right-click the node that represents the servant instance. From the
contextual menu, choose Copy Client Code.</li>

<li>
Switch to the editing window (your client class should be open in the editing
window.)</li>

<li>
Locate the following comment in the generated code:</li>
<pre>
  // paste here code from Copy Client Code on Object Node in NamingService Browser
</pre>

<li>
Put your cursor underneath this line and press CTRL-V. This shortcut pastes the
code that was generated by the Naming Service Browser, which looks
something like this:</li>
<pre>
    String[] client_name_hierarchy = new String [] {"Forte4J", "Demo",
    "HelloWorldImpl", "Demo"};
</pre>
</ol>
</p>

<h3><a NAME="new"></a>Coding the narrow() Method and Invoking Server-side Methods</h3>

<p>
Whichever binding method your client uses, the result is an object of type
<tt>org.omg.CORBA.Object</tt>, named <tt>obj</tt>, which represents the IOR. For
example, clients that read an IOR from a file contain this
<OBJECT classid="java:com.sun.java.help.impl.JHSecondaryViewer">
  <param name="content" value="./objcode.html">
  <param name="viewerActivator" value="javax.help.LinkLabel">
  <param name="viewerStyle" value="javax.help.SecondaryWindow">
  <param name="viewerSize" value="600,350">
  <param name="text" value="code.">
  <param name="textFontFamily" value="SansSerif">
  <param name="textFontSize" value="small">
  <param name="textFontWeight" value="plain">
  <param name="textFontStyle" value="plain">
  <param name="textColor" value="blue">
</OBJECT>
</p>

<p>
In clients that use naming service binding, the IOR is obtained by the
<tt>resolve()</tt> method. See the 
<OBJECT classid="java:com.sun.java.help.impl.JHSecondaryViewer">
  <param name="content" value="./resolvecode.html">
  <param name="viewerActivator" value="javax.help.LinkLabel">
  <param name="viewerStyle" value="javax.help.SecondaryWindow">
  <param name="viewerSize" value="600,350">
  <param name="text" value="code example">
  <param name="textFontFamily" value="SansSerif">
  <param name="textFontSize" value="small">
  <param name="textFontWeight" value="plain">
  <param name="textFontStyle" value="plain">
  <param name="textColor" value="blue">
</OBJECT>
for details.
</p>

<p>
To use the IOR, you need to perform a <tt>narrow()</tt> method, which
returns a proxy for the server-side object.
<ol>
<li>
In your generated client file, look for this comment:
<pre>
 // Place narrowing of your object here.
 // Something like:  <interface> <name> = <class>Helper.narrow (obj);
</pre>
</li>

<li>
Replace it with code that creates a client-side proxy for the servant instance.
For example:
<pre>
 Hello helloProxy = helloHelper.narrow (obj);
</pre></li>

<li>
Add code that invokes server-side methods on the proxy object. For example:
<pre>
 System.out.println (helloProxy.sayHello(3));
</pre></li>
</ol>
</p>
<p>
The first line creates the proxy. <tt>Hello</tt> is a Java interface that
was generated from the <tt>Hello</tt> interface in IDL; it is used here
as a Java datatype. The object, <tt>obj</tt>, that was returned from the
naming service, is narrowed (cast) to a <tt>Hello</tt> type. The second
line uses the proxy to invoke the <tt>sayHello()</tt> method.</p>

<h3>Compiling Your Client</h3>
<p>
The last step is to compile all of the classes related to the client, including
the IDL file, together:
<ul>
<li>Right-click the node for the package and select
Compile from the contextual menu.</li>
</ul>
</p>

<table>
<tr valign="top">
<th colspan=2 align=left>See also</th>
</tr>
<tr valign="top">
<td width="23"></td>
<td><a href="../completing/corba_completing_server.html">Completing Server-side Files</a>
<br>
<a href="../generating/corba_generating.html">Generating CORBA Files</a>
</td>
</tr>
</table>

<hr>
<font size=-2><a href="../credits.html">Legal Notices</a></font>
</body>
</html>
