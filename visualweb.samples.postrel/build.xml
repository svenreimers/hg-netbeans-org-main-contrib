<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="netbeans" name="visualweb/samples/postrel">
    <description>Builds, tests, and runs the project org.netbeans.modules.visualweb.samples.postrel</description>
    <import file="../../../nbbuild/templates/projectized.xml"/>

    <target name="jar" depends="gather-samples,projectized-common.jar"/>
    
    <target name="-init">
        <!-- properties -->
        <property name="webapps.dest"       location="${build.classes.dir}/org/netbeans/modules/visualweb/samples/postrel" />
        <property name="webapps.desc.dest"  location="${webapps.dest}/descriptions" />
        <property name="webapps.repos"      location="../webapps" />
        <property name="webapps.desc"       location="${webapps.repos}/descriptions" />
        <property name="complibs.dest"      location="release/samples/complibs" />
        <property name="complibs.repos"     location="../complibs" />
    </target>

    <target name="gather-samples" depends="-init">
        <echo message="Zipping up and copying sample web app projects." />
        <!-- sample webapps -->
        <mkdir dir="${webapps.dest}" />
        <copy file="${webapps.desc}/CurrencyTrader.html" todir="${webapps.desc.dest}" />
        <zip basedir="${webapps.repos}/CurrencyTrader" excludes="CVS,private,.cvsignore" destfile="${webapps.dest}/CurrencyTrader.zip" />  
    </target>
    
    <target name="netbeans-extra" depends="-init">
        <!-- sample complibs -->
        <echo message="Copying sample complibs." />
        <mkdir dir="${complibs.dest}" /> <!-- Create the dir because complibs mgr looks there for complibs. -->
        <copy file="${complibs.repos}/ui/ui.complib" todir="${complibs.dest}" flatten="true"/>
        <copy file="${complibs.repos}/dynamicfaces/dynamicfaces.complib" todir="${complibs.dest}" flatten="true"/>
    </target>

    <target name="clean" depends="projectized-common.clean,complibs-clean" />

    <!-- Clean out the complibs directory. -->
    <target name="complibs-clean" depends="-init">
        <delete dir="${complibs.dest}" verbose="true"/>
    </target>    
</project>
