<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See harness/README in the NetBeans platform -->
<!-- for some information on what you could do (e.g. targets to override). -->
<!-- If you delete this file and reopen the project it will be recreated. -->
<project name="org.netbeans.modules.j2ee.oc4j" default="netbeans" basedir=".">
    <description>Builds, tests, and runs the project org.netbeans.modules.j2ee.oc4j.</description>
    <import file="../../nbbuild/templates/projectized.xml"/>
    
    <property name="oc4j_dir" location="src/org/netbeans/modules/j2ee/oc4j"/>
  
  <target name="s2binit" depends="build-init">
	<taskdef name="schema2beans" classname="org.netbeans.modules.s2banttask.Schema2BeansAntTask">
	  <classpath>
		<pathelement path="${schema2beans/rt.dir}/modules/org-netbeans-modules-schema2beans.jar" />
		<pathelement path="${nb_all}/schema2beans/dev/schema2beansdev.jar" />
		<pathelement path="${nb_all}/schema2beans/anttask/s2banttask.jar"/>
	  </classpath>
	</taskdef>
  </target>
  
  <target name="dd2beans_gen" depends="s2binit">
      <echo message="generating bean graph for OC4J 10g Server configuration files" />
	<schema2beans schema="${oc4j_dir}/resources/orion-web-10_0.xsd"
	  package="org.netbeans.modules.j2ee.oc4j.config.gen"
	  schemaType="xmlschema"
	  validate="true"
	  attrProp="true"
	  removeUnreferencedNodes="true"
          docroot="orion-web-app"
	  rootDir="src"/>
	<schema2beans schema="${oc4j_dir}/resources/orion-ejb-jar-10_0.xsd"
	  package="org.netbeans.modules.j2ee.oc4j.config.gen"
          mddfile="${oc4j_dir}/resources/orion-ejb-jar-10_0.mdd"
	  schemaType="xmlschema"
	  validate="true"
	  attrProp="true"
	  removeUnreferencedNodes="true"
          docroot="orion-ejb-jar"
	  rootDir="src"/>
	<schema2beans schema="${oc4j_dir}/resources/orion-application-10_0.xsd"
	  package="org.netbeans.modules.j2ee.oc4j.config.gen"
	  schemaType="xmlschema"
	  validate="true"
	  attrProp="true"
	  removeUnreferencedNodes="true"
          docroot="orion-application"
	  rootDir="src"/>
          <schema2beans schema="${oc4j_dir}/resources/data-sources-10_1.xsd"
	  package="org.netbeans.modules.j2ee.oc4j.config.gen"
	  schemaType="xmlschema"
	  validate="true"
	  attrProp="true"
	  removeUnreferencedNodes="true"
          docroot="data-sources"
	  rootDir="src"/>
  </target>
  
  <target name="compile" depends="dd2beans_gen, projectized-common.compile"/>
    
  <target name="clean" depends="clean-ddgen-src, projectized-common.clean"/>

  <target name="clean-ddgen-check">
    <available property="have-config" file="${oc4j_dir}/config/gen"/>
  </target>

  <target name="clean-ddgen-src" if="have-config" depends="clean-ddgen-check">
        <delete>
            <fileset dir="${oc4j_dir}/config/gen">
                <include name="*.java"/>
            </fileset>
        </delete>
        <delete dir="${oc4j_dir}/config/gen"/>
  </target>
</project>
