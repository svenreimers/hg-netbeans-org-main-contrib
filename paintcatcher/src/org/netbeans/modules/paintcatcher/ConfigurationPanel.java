/*
 *                 Sun Public License Notice
 * 
 * The contents of this file are subject to the Sun Public License
 * Version 1.0 (the "License"). You may not use this file except in
 * compliance with the License. A copy of the License is available at
 * http://www.sun.com/
 * 
 * The Original Code is NetBeans. The Initial Developer of the Original
 * Code is Sun Microsystems, Inc. Portions Copyright 1997-2003 Sun
 * Microsystems, Inc. All Rights Reserved.
 */
/*
 * ConfigurationPanel.java
 *
 * Created on February 23, 2004, 10:13 PM
 */

package org.netbeans.modules.paintcatcher;
import org.openide.ErrorManager;
import org.openide.util.Lookup;

/**
 *
 * @author  tim
 */
public class ConfigurationPanel extends javax.swing.JPanel {
    
    /** Creates new form ConfigurationPanel */
    public ConfigurationPanel() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        java.awt.GridBagConstraints gridBagConstraints;

        jLabel1 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jCheckBox1 = new javax.swing.JCheckBox();
        jLabel2 = new javax.swing.JLabel();
        jCheckBox2 = new javax.swing.JCheckBox();
        jCheckBox3 = new javax.swing.JCheckBox();
        jCheckBox4 = new javax.swing.JCheckBox();

        setLayout(new java.awt.GridBagLayout());

        setBorder(new javax.swing.border.EmptyBorder(new java.awt.Insets(11, 11, 11, 11)));
        jLabel1.setText("Component class");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 11, 0);
        add(jLabel1, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 11, 11, 0);
        add(jTextField1, gridBagConstraints);

        jCheckBox1.setText("Log AWT paint events");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 11, 0);
        add(jCheckBox1, gridBagConstraints);

        jLabel2.setText("Enter the name of a subclass of java.awt.Component");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.1;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 11, 0);
        add(jLabel2, gridBagConstraints);

        jCheckBox2.setText("Match subclasses");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 11, 0);
        add(jCheckBox2, gridBagConstraints);

        jCheckBox3.setText("Match if has ancestor of class");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 11, 0);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        add(jCheckBox3, gridBagConstraints);

        jCheckBox4.setText("Print stack traces");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 5, 0);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.1;
        add(jCheckBox4, gridBagConstraints);

    }//GEN-END:initComponents
    
    public void setMatchIfAncestor(boolean val) {
        jCheckBox3.setSelected(val);
    }
    
    public void setMatchSubclasses(boolean val) {
        jCheckBox2.setSelected(val);
    }
    
    public void setLogAWTEvents (boolean val) {
        jCheckBox1.setSelected(val);
    }
    
    public void setDumpStack (boolean val) {
        jCheckBox4.setSelected(val);
    }
    
    public void setTargetClass (Class clazz) {
        if (clazz != null) {
            jTextField1.setText(clazz.getName());
        } else {
            jTextField1.setText("");
        }
    }
    
    public boolean isDumpStack() {
        return jCheckBox4.isSelected();
    }
    
    public boolean isMatchIfAncestor() {
        return jCheckBox3.isSelected();
    }
    
    public boolean isMatchSubclasses() {
        return jCheckBox2.isSelected();
    }
    
    public boolean isLogAWTEvents() {
        return jCheckBox1.isSelected();
    }
    
    public Class getTargetClass() {
        String s = jTextField1.getText();
        s = s.trim();
        if (s.length() == 0) {
            return null;
        }
        try {
            ClassLoader old = Thread.currentThread().getContextClassLoader();
            Class result;
            try {
                ClassLoader cl = (ClassLoader) Lookup.getDefault().lookup(ClassLoader.class);
                Thread.currentThread().setContextClassLoader(cl);
                result = Class.forName(s);
            } finally {
                Thread.currentThread().setContextClassLoader(old);
            }
            return result;
        } catch (Exception e) {
            ErrorManager.getDefault().notify(e);
            return null;
        }
    }
    
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JCheckBox jCheckBox1;
    private javax.swing.JCheckBox jCheckBox2;
    private javax.swing.JCheckBox jCheckBox3;
    private javax.swing.JCheckBox jCheckBox4;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration//GEN-END:variables
    
}
