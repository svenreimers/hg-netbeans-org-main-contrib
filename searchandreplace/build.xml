<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="netbeans" name="contrib/searchandreplace">
    <description>Builds, tests, and runs the project org.netbeans.modules.searchandreplace</description>
    <import file="../../nbbuild/templates/projectized.xml"/>

    <property name="tempdir" value="${java.io.tmpdir}/searchAndReplaceTestData"/>
    <property name="goldendir" value="${java.io.tmpdir}/searchAndReplaceTestDataGolden"/>
    <property name="resultsdir" value="${java.io.tmpdir}/searchAndReplaceTestDataExpectedResults"/>

    <target name="clean-testdata">
        <delete dir="${tempdir}"/>
        <delete dir="${goldendir}"/>
        <delete dir="${resultsdir}"/>
    </target>

    <target name="test-preinit" depends="clean-testdata,init">
        <echo message="Unpacking test data"/>
        <mkdir dir="${tempdir}"/>
        <unzip dest="${tempdir}">
            <fileset dir="${basedir}/testdata/golden">
                <include name="*.zip"/>
            </fileset>
        </unzip>

        <mkdir dir="${goldendir}"/>
        <unzip dest="${goldendir}">
            <fileset dir="${basedir}/testdata/golden">
                <include name="*.zip"/>
            </fileset>
        </unzip>

        <mkdir dir="${resultsdir}"/>
        <unzip dest="${resultsdir}">
            <fileset dir="${basedir}/testdata/results/">
                <include name="*.zip"/>
            </fileset>
        </unzip>
    </target>
</project>
